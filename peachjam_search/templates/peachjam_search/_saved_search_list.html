{% load i18n %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2>{% trans 'Search alerts' %}</h2>
</div>
{% if saved_searches %}
  {% for search in saved_searches %}
    <div class="card mb-5">
      <h5 class="card-header">{{ search }}</h5>
      <div class="card-body">
        <div>
          <p class="mb-0">
            <strong>{% trans 'Search filters:' %}</strong>
          </p>
          <p>
            {% for key, values in search.get_filters_dict.items %}
              <strong>{{ key }}:</strong>
              {% for value in values %}
                {{ value }}
                {% if not forloop.last %},{% endif %}
              {% endfor %}
              {% if not forloop.last %},{% endif %}
              <br/>
            {% endfor %}
          </p>
          <p class="mb-0">
            <strong>{% trans 'Last updated:' %}</strong>
          </p>
          <p>{{ search.last_alerted_at }}</p>
          {% if search.note %}
            <p class="mb-0">
              <strong>{% trans 'Note:' %}</strong>
            </p>
            <p>{{ search.note }}</p>
          {% endif %}
        </div>
      </div>
      <div class="card-footer text-end">
        <input id="search_{{ forloop.counter }}"
               type="hidden"
               name="name"
               value="{{ search.name }}"/>
        <button class="btn btn-outline-danger me-2"
                hx-post="{% url 'search:saved_search_delete' search.pk %}"
                type="button"
                hx-confirm="Are you sure you want to delete this search?">
          {% trans 'Delete' %}
        </button>
        <a class="btn btn-primary" href="{{ search.get_absolute_url }}">{% trans 'Search now' %}</a>
      </div>
    </div>
  {% endfor %}
{% else %}
  <p>{% trans 'You have no search alerts.' %}</p>
{% endif %}
