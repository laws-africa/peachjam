{% extends "peachjam/layouts/main.html" %}
{% load i18n %}
{% block title %} {% trans 'Legislation' %} {% endblock %}

{% block page-content %}
<section class="pb-5">
  <div class="container">
    {% block breadcrumbs %}
    {% endblock %}

    {% block page-heading %}
    <h1 class="my-4">{% trans 'Legislation' %}</h1>
    {% endblock %}

    {% block legislation-nav %}
    <ul class="nav nav-tabs mb-3 border-bottom">
      <li class="nav-item">
        <a class="nav-link {% if view.variant == 'current' %}active{% endif %}" href="{% url 'legislation_list' %}">
          {% trans 'Current legislation' %}
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link {% if view.variant == 'repealed' %}active{% endif %}"
           href="{% url 'legislation_list_repealed' %}">
          {% trans 'Repealed legislation' %}
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link {% if view.variant == 'all' %}active{% endif %}" href="{% url 'legislation_list_all' %}">
          {% trans 'All legislation' %}
        </a>
      </li>
    </ul>
    {% endblock %}

    {% if view.variant == 'repealed' %}
    <div class="alert alert-danger">
      {% trans 'You are viewing repealed legislation which is no longer in force.' %}
    </div>
    {% endif %}

    <div data-vue-component="LegislationTable" data-show-side-facets data-current-lang="{{ three_code_current_lang }}">
      {% comment %}
      This ensures that peachjam has links to scrape. This content is replaced when the javacript LegislationTable
      component runs.
      {% endcomment %}
      <ul>
        {% for item in legislation_table %}
        <li>
          <a href="{{ item.work_frbr_uri }}">{{ item.title }}</a>
          {% if item.children %}
          <ul>
            {% for kid in item.children %}
            <li><a href="{{ kid.work_frbr_uri }}">{{ kid.title }}</a></li>
            {% endfor %}
          </ul>
          {% endif %}
        </li>
        {% endfor %}
      </ul>
    </div>
<!--  TODO: Proposed data shape of legislation for applicable language. Confirm that this shape plausible -->
    <script type="application/json" id="legislation-table">
      [
        {
          "versions": {
            "fra": {
              "title": "Magistrates' Courts Act, 1944 French",
              "children": [],
              "citation": "Act 32 of 1944",
              "work_frbr_uri": "/akn/za/act/1944/32"
            },
            "spa": {
              "title": "Magistrates' Courts Act, 1944 Spanish",
              "children": [],
              "citation": "Act 32 of 1944",
              "work_frbr_uri": "/akn/za/act/1944/32"
            }
          },
          "repealed": false,
          "year": 1984,
          "taxonomies": []
        },
        {
          "versions": {
            "eng": {
              "title": "Magistrates' Courts Amendment Act, 1952",
              "children": [],
              "citation": "Act 40 of 1952",
              "work_frbr_uri": "/akn/za/act/1952/40"
            }
          },
          "repealed": false,
          "year": 1952,
          "taxonomies": []
        },
        {
          "versions": {
            "eng": {
            "title": "Magistrates' Courts Amendment Act, 1954",
            "children": [],
            "citation": "Act 14 of 1954",
            "work_frbr_uri": "/akn/za/act/1954/14"}
          },
          "repealed": false,
          "year": 1954,
          "taxonomies": []
        }
      ]
    </script>
  </div>
</section>
{% endblock %}
